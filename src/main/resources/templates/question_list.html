<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Resume - Start Bootstrap Theme</title>
    <link rel="icon" type="image/x-icon" th:href="@{/images/favicon.ico}" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
</head>
<body>
<h1>Hello, world!</h1>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
    <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <span class="d-block d-lg-none">Clarence Taylor</span>
        <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" th:src="@{/images/profile.jpg}" alt="..." /></span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link js-scroll-trigger" th:href="@{/}">Home</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" th:href="@{/question/list}">게시판</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#education">Education</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#skills">Skills</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#interests">Interests</a></li>
            <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#awards">Awards</a></li>
        </ul>
    </div>
</nav>
<div class="container">
<!--    검색창-->
    <form th:action="@{/question/list}" method="get" id="searchForm">
        <div class="input-group" style="display: flex; width: 75%;">
            <select class="custom-select form-control" name="type" style="flex: 1 1 15%;">
                <option th:selected="${pageRequestDto.type == null}">Open this select menu</option>
                <option value="t" th:selected="${pageRequestDto.type == 't'}">제목</option>
                <option value="c" th:selected="${pageRequestDto.type == 'c'}">내용</option>
                <option value="w" th:selected="${pageRequestDto.type == 'w'}">작성자</option>
                <option value="tc" th:selected="${pageRequestDto.type == 'tc'}">제목+내용</option>
                <option value="tcw" th:selected="${pageRequestDto.type == 'tcw'}">제목+내용+작성자</option>
            </select>
            <input class="form-control col-7" name="keyword" th:value="${pageRequestDto.keyword}" placeholder="Search keyword" style="flex: 1 1 65%;">
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-search" type="submit">Search</button>
            </div>
        </div>
    </form>




    <br> <br>
<!--    글 등록 버튼-->
    <button type="button" id="registerBtn" class="btn btn-outline-primary"><a class="nav-link js-scroll-trigger" th:href="@{/question/register}">글 등록하기</a></button>

<!--    게시판 리스트-->
    <table class="table table-success table-striped">
        <thead>
        <tr>
            <th>Number</th>
            <th>Subject</th>
            <!--                <th>Content</th>-->
            <th>Writer</th>
            <th>Created At</th>
        </tr>
        </thead>
        <tbody>
            <tr th:each="question : ${questionList.dtoList}">
                <th scope="row">
                    <a th:href="@{/question/read/{id}(id = ${question.id}, page=${questionList.page})}">[[${question.id}]]</a>
                </th>
                <td th:text="${question.subject}"></td>
                <td>
                    <img th:if="${question.thumbnailUrl != null}" th:src="@{${question.thumbnailUrl}}" alt="Thumbnail" style="max-width: 100px; max-height: 100px;">
                </td>
                <!--                <td th:text="${question.content}"></td>-->
                <td th:text="${question.writer.username}"></td>
                <td th:text="${question.createdAt}"></td>
            </tr>
        </tbody>
    </table>

    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${!questionList.prev} ? disabled">
                <a class="page-link" th:href="@{/question/list(page=${questionList.start - 1},
type=${pageRequestDto.type}, keyword=${pageRequestDto.keyword})}" tabindex="-1">Prev</a>
            </li>

            <li class="page-item" th:each="page : ${questionList.pageList}" th:classappend="${questionList.page == page} ? 'active'">
                <a class="page-link" th:href="@{/question/list(page=${page}, keyword=${pageRequestDto.keyword}, type=${pageRequestDto.type})}">[[${page}]]</a>
            </li>

            <li class="page-item" th:if="${!questionList.next} ? 'disabled'">
                <a class="page-link" th:href="@{/question/list(page=${questionList.end + 1}, keyword=${pageRequestDto.keyword}, type=${pageRequestDto.type})}">Next</a>
            </li>
        </ul>
    </nav>
</div>

<!--글 등록 후 팝업-->
<div class="modal" id="messageModal" tabindex="-1" role="dialog" style="display:none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Message</h5>
                <button type="button" class="btn-close" aria-label="Close" onclick="closeModal()"></button>
            </div>
            <div class="modal-body">
                <p th:text="${msg}">No message available</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">확인</button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script th:src="@{/js/scripts.js}"></script>

<script th:inline="javascript">
<!--    글 등록 후 팝업-->
    var msg = [[${msg}]]
    console.log(msg)
    if (msg) {
            document.getElementById('messageModal').style.display = 'block';
        }

    function closeModal() {
        document.getElementById('messageModal').style.display = 'none';
    }
</script>

</body>
</html>